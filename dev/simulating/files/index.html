<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>How to write ODE functions file? · NmodController</title><meta name="title" content="How to write ODE functions file? · NmodController"/><meta property="og:title" content="How to write ODE functions file? · NmodController"/><meta property="twitter:title" content="How to write ODE functions file? · NmodController"/><meta name="description" content="Documentation for NmodController."/><meta property="og:description" content="Documentation for NmodController."/><meta property="twitter:description" content="Documentation for NmodController."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="NmodController logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">NmodController</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Initializing a conductance based model</span><ul><li><a class="tocitem" href="../../initializing/current/">How to initialize an ionic current?</a></li><li><a class="tocitem" href="../../initializing/neuron/">How to initialize a conductance based model?</a></li><li><a class="tocitem" href="../../initializing/examples/">Examples of existing models</a></li></ul></li><li><span class="tocitem">Computing dynamical input conductances (DICs)</span><ul><li><a class="tocitem" href="../../computing/DICs/">How to compute DICs and sensitivity matrix?</a></li><li><a class="tocitem" href="../../computing/examples/">Examples of existing models</a></li></ul></li><li><span class="tocitem">Simulating with DifferentialEquations.jl</span><ul><li class="is-active"><a class="tocitem" href>How to write ODE functions file?</a><ul class="internal"><li><a class="tocitem" href="#Simulating-uncontrolled-conductance-based-models"><span>Simulating uncontrolled conductance based models</span></a></li><li><a class="tocitem" href="#Simulating-controlled-conductance-based-models"><span>Simulating controlled conductance based models</span></a></li></ul></li><li><a class="tocitem" href="../examples/">Examples of existing models</a></li></ul></li><li><a class="tocitem" href="../../typesMethodsFunctions/">Types/Methods/Functions</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Simulating with DifferentialEquations.jl</a></li><li class="is-active"><a href>How to write ODE functions file?</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>How to write ODE functions file?</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/arthur-fyon/NmodController.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/arthur-fyon/NmodController.jl/blob/main/docs/src/simulating/files.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Simulating-conductance-based-models"><a class="docs-heading-anchor" href="#Simulating-conductance-based-models">Simulating conductance based models</a><a id="Simulating-conductance-based-models-1"></a><a class="docs-heading-anchor-permalink" href="#Simulating-conductance-based-models" title="Permalink"></a></h1><h2 id="Simulating-uncontrolled-conductance-based-models"><a class="docs-heading-anchor" href="#Simulating-uncontrolled-conductance-based-models">Simulating uncontrolled conductance based models</a><a id="Simulating-uncontrolled-conductance-based-models-1"></a><a class="docs-heading-anchor-permalink" href="#Simulating-uncontrolled-conductance-based-models" title="Permalink"></a></h2><p>The most intersting thing about conductance based models kicks in when integrating their ODEs. Indeed, the voltage solution can reproduce neuronal activity and is widely used in either computational neuroscience or neuromorphic engineering. <em>NmodController.jl</em> can be used to simulate conductance based models coupled with <a href="https://github.com/SciML/DifferentialEquations.jl"><em>DifferentialEquations.jl</em></a>. This is a suite for numerically solving differential equations written in Julia. The purpose of this package is to supply efficient Julia implementations of solvers for various differential equations.</p><p>The way <em>NmodController.jl</em> helps with simulating conductance based model is that it provides an easy way to write the ODE function necessary for <em>DifferentialEquations.jl</em> solvers with the function <code>writeUncontrolledODEs()</code>. As arguments, you only have to specify your model. Note that the ODE function will be written in a newly created <em>.jl</em> file that you can specify with the optional argument <code>filename</code>.</p><h3 id="Example-1"><a class="docs-heading-anchor" href="#Example-1">Example 1</a><a id="Example-1-1"></a><a class="docs-heading-anchor-permalink" href="#Example-1" title="Permalink"></a></h3><p>The next few lines of code show how to write the ODE function file using a predefined conductance based model <code>neuron</code>.</p><pre><code class="language-julia hljs">using NmodController
writeUncontrolledODEs(neuron, filename=&quot;neuron_ODE.jl&quot;)</code></pre><p>To define your ODE problem, you have to include your newly created <em>.jl</em> file and to put the ODE function, which is by default <code>CBModelODEs</code>, in argument of the <code>ODEproblem()</code> function from the <em>DifferentialEquations.jl</em> suite along with the simulation parameters, initial conditions and time span over which you want to integrate. Finally, just solve with <code>solve()</code> from the <em>DifferentialEquations.jl</em> suite.</p><h2 id="Simulating-controlled-conductance-based-models"><a class="docs-heading-anchor" href="#Simulating-controlled-conductance-based-models">Simulating controlled conductance based models</a><a id="Simulating-controlled-conductance-based-models-1"></a><a class="docs-heading-anchor-permalink" href="#Simulating-controlled-conductance-based-models" title="Permalink"></a></h2><p>In Fyon et al., 2023 &quot;Reliable neuromodulation from adaptive control of ion channel expression&quot; is proposed a first robust neuromodulation adaptive controller that can be used with any conductance based model. In brief, it allows you to control <span>$p$</span> DICs at any voltage (here, we only use threshold voltage since DICs at such voltage shape neuronal activity) with <span>$n$</span> ionic currents. Thus, by adequately choosing the neuromodulated maximum ion channel conductances and the DICs you want to control, any physiological firing pattern can be achieved by inputting appropriate values of the DICs. Note that <span>$p \leq n$</span> in order to be the linear system behind the controller to have a solution.</p><p>The way <em>NmodController.jl</em> helps with simulating neuromodulated conductance based model is that it provides an easy way to write the ODE function necessary for <em>DifferentialEquations.jl</em> solvers with the function <code>writeControlledODEs()</code>. As arguments, you only have to specify your model, the names of the conductance you want to neuromodulate and the names of the DICs you want to control. Note that the ODE function will be written in a newly created <em>.jl</em> file that you can specify with the optional argument <code>filename</code>.</p><h3 id="Example-2"><a class="docs-heading-anchor" href="#Example-2">Example 2</a><a id="Example-2-1"></a><a class="docs-heading-anchor-permalink" href="#Example-2" title="Permalink"></a></h3><p>The next few lines of code show how to write the ODE function file using a predefined conductance based model <code>neuron</code>.</p><pre><code class="language-julia hljs">using NmodController
writeControlledODEs(neuron, [&quot;ion1&quot;, &quot;ion2&quot;, &quot;ion3&quot;], [&quot;f&quot;, &quot;s&quot;, &quot;u&quot;], filename=&quot;ControlledNeuron_ODE.jl&quot;)</code></pre><p>To define your ODE problem, you have to include your newly created <em>.jl</em> file and to put the ODE function, which is by default <code>ControlledCBModelODEs</code>, in argument of the <code>ODEproblem()</code> function from the <em>DifferentialEquations.jl</em> suite along with the simulation parameters, initial conditions and time span over which you want to integrate. Finally, just solve with <code>solve()</code> from the <em>DifferentialEquations.jl</em> suite.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../computing/examples/">« Examples of existing models</a><a class="docs-footer-nextpage" href="../examples/">Examples of existing models »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.0.1 on <span class="colophon-date" title="Monday 18 September 2023 22:53">Monday 18 September 2023</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>

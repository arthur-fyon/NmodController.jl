<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>How to initialize an ionic current? · NmodController</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">NmodController</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Initializing a conductance based model</span><ul><li class="is-active"><a class="tocitem" href>How to initialize an ionic current?</a></li><li><a class="tocitem" href="../neuron/">How to initialize a conductance based model?</a></li><li><a class="tocitem" href="../examples/">Examples of existing models</a></li></ul></li><li><span class="tocitem">Computing dynamical input conductances (DICs)</span><ul><li><a class="tocitem" href="../../computing/DICs/">How to compute DICs and sensitivity matrix?</a></li><li><a class="tocitem" href="../../computing/examples/">Examples of existing models</a></li></ul></li><li><span class="tocitem">Simulating with DifferentialEquations.jl</span><ul><li><a class="tocitem" href="../../simulating/files/">How to write ODE functions file?</a></li><li><a class="tocitem" href="../../simulating/examples/">Examples of existing models</a></li></ul></li><li><a class="tocitem" href="../../typesMethodsFunctions/">Types/Methods/Functions</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Initializing a conductance based model</a></li><li class="is-active"><a href>How to initialize an ionic current?</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>How to initialize an ionic current?</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/arthur-fyon/NmodController.jl/blob/main/docs/src/initializing/current.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Initializing-an-ionic-current"><a class="docs-heading-anchor" href="#Initializing-an-ionic-current">Initializing an ionic current</a><a id="Initializing-an-ionic-current-1"></a><a class="docs-heading-anchor-permalink" href="#Initializing-an-ionic-current" title="Permalink"></a></h1><p>In conductance based models, an ionic current <span>$I_\mathrm{ion}$</span> is described by its voltage dependent conductance <span>$g_\mathrm{ion}$</span> and Nernst reversal potential <span>$E_\mathrm{ion}$</span></p><p class="math-container">\[I_\mathrm{ion} = g_\mathrm{ion}(V) \cdot (V - E_\mathrm{ion}).\]</p><p>This voltage dependent conductance is defined by its maximum value <span>$\bar{g}_\mathrm{ion}$</span> and at most two gating variables, one activation <span>$m_\mathrm{ion}(V)$</span> and one inactivation <span>$h_\mathrm{ion}(V)$</span>, that varies between 0 and 1. In the case of a current with two gating variables, this writes</p><p class="math-container">\[g_\mathrm{ion}(V) = \bar{g}_\mathrm{ion} \cdot m^{a}_\mathrm{ion}(V) \cdot h^{b}_\mathrm{ion}(V).\]</p><p>Note that the maximum ion channel conductance of the current will not be stocked inside the current data structure, but rather in the conductance based model data structure.</p><p>Each gating variable dynamic follow a basic first order ODE where both the time constant <span>$\tau_{m_\mathrm{ion}}$</span> and the converging value <span>$m_{\mathrm{ion}_\infty}$</span> are voltage dependent: </p><p class="math-container">\[\dot{m}_\mathrm{ion} = \frac{m_{\mathrm{ion}_\infty}(V) - m_\mathrm{ion}}{\tau_{m_\mathrm{ion}}(V)}.\]</p><p>In <em>NmodController.jl</em>, an ionic current can be contained in a <code>IonCurrent</code> type. To help initializing such data structure, calling <code>initializeCurrent()</code> with appropriate arguments is strongly recommended.</p><h3 id="Example-1"><a class="docs-heading-anchor" href="#Example-1">Example 1</a><a id="Example-1-1"></a><a class="docs-heading-anchor-permalink" href="#Example-1" title="Permalink"></a></h3><p>The next few lines of code show how to initialize a sodium current with two gating variables. This current writes</p><p class="math-container">\[I_\mathrm{Na} = \bar{g}_\mathrm{Na} \cdot m^{3}_\mathrm{Na} \cdot h_\mathrm{Na} \cdot (V - E_\mathrm{Na}).\]</p><pre><code class="language- hljs"># First initializing the converging values and time constants functions
boltz(V, A, B) = 1 / (1 + exp((V+A) / B))
tauX(V, A, B, D, E) = A - B / (1 + exp((V+D) / E))

mNa_inf(V) = boltz(V, 25.5, -5.29)
tau_mNa(V) = tauX(V, 1.32, 1.26, 120., -25.)
hNa_inf(V) = boltz(V, 48.9, 5.18)
tau_hNa(V) = (0.67 / (1 + exp((V+62.9)/-10.0))) * (1.5 + 1 / (1+exp((V+34.9)/3.6)))

# Initializing Nernst reversal potential
ENa = 50.

using NmodController
NaCurrent = initializeCurrent(&quot;Na&quot;, ENa, numberOfGatings=2, exponents=[3, 1],
    activationSteadyStateGating=mNa_inf, activationTimeConstant=tau_mNa,
    inactivationSteadyStateGating=hNa_inf, inactivationTimeConstant=tau_hNa)</code></pre><h3 id="Example-2"><a class="docs-heading-anchor" href="#Example-2">Example 2</a><a id="Example-2-1"></a><a class="docs-heading-anchor-permalink" href="#Example-2" title="Permalink"></a></h3><p>Sometimes, the gating variable converging values may depend on the intracellular calcium. The next few lines of code show how to initialize a calcium controlled potassium current with one gating variable. This current writes</p><p class="math-container">\[I_\mathrm{KCa} = \bar{g}_\mathrm{KCa} \cdot m^{4}_\mathrm{KCa} \cdot (V - E_\mathrm{KCa}).\]</p><p>Where the dynamic of <span>$m_\mathrm{KCa}$</span> is described by</p><p class="math-container">\[\dot{m}_\mathrm{KCa} = \frac{m_{\mathrm{KCa}_\infty}(V, Ca) - m_\mathrm{KCa}}{\tau_{m_\mathrm{KCa}}(V)}.\]</p><p>As you can see, <span>$m_{\mathrm{KCa}_\infty}$</span> depends on both the voltage and the calcium, this must be notified to <code>initializeCurrent()</code>.</p><pre><code class="language-julia hljs"># First initializing the converging value and time constant functions
boltz(V, A, B) = 1 / (1 + exp((V+A) / B))
tauX(V, A, B, D, E) = A - B / (1 + exp((V+D) / E))

mKCa_inf(V, Ca) = (Ca / (Ca+3)) * (1 / (1+exp((V+28.3)/-12.6)))
tau_mKCa(V) = tauX(V, 90.3, 75.1, 46., -22.7)

# Initializing Nernst reversal potential
EK = -80.

using NmodController
KCaCurrent = initializeCurrent(&quot;KCa&quot;, EK, exponents=4,
    activationSteadyStateGating=mKCa_inf, activationTimeConstant=tau_mKCa,
    calciumDependency=true)</code></pre><h3 id="Example-3"><a class="docs-heading-anchor" href="#Example-3">Example 3</a><a id="Example-3-1"></a><a class="docs-heading-anchor-permalink" href="#Example-3" title="Permalink"></a></h3><p>Another specific case is where the time constant may not depend on the voltage. In such case, just provide the time constant as a <code>Float64</code> or a <code>Int64</code> in argument of <code>initializeCurrent()</code>. Moreover, the converging value of the gating variable may be magnesium dependent. In such case, do as the following. The next few lines of code show how to initialize an instantaneous magnesium dependent NMDA current with one gating variable. This current writes</p><p class="math-container">\[I_\mathrm{NMDA} = \bar{g}_\mathrm{NMDA} \cdot m_\mathrm{NMDA} \cdot (V - E_\mathrm{NMDA}).\]</p><p>Where the dynamic of <span>$m_\mathrm{NMDA}$</span> is described by</p><p class="math-container">\[m_\mathrm{NMDA} = m_{\mathrm{NMDA}_\infty}(V, Mg).\]</p><p>As you can see, <span>$m_{\mathrm{NMDA}_\infty}$</span> depends on both the voltage and the magnesium, this must be notified to <code>initializeCurrent()</code></p><pre><code class="language-julia hljs"># First initializing the converging value and time constant functions
NMDA_inf(V, Mg) = 1 / (1 + Mg*exp(-0.08*V)/10.)
tau_NMDA(V) = 1e-10 # Never equal to zero, this might be fixed later on

# Initializing Nernst reversal potential
ENMDA = 0.

using NmodController
NMDACurrent = initializeCurrent(&quot;NMDA&quot;, ENMDA, exponents=1,
    activationSteadyStateGating=NMDA_inf, activationTimeConstant=tau_NMDA,
    MgDependency=true)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« Home</a><a class="docs-footer-nextpage" href="../neuron/">How to initialize a conductance based model? »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Thursday 14 September 2023 09:28">Thursday 14 September 2023</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
